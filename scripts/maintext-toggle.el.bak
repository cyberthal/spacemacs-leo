;; * Toggle whether maintext autoloads
;; * Set the search locations

;; ** for org-agenda

(defun cb-clear-org-agenda ()
  "Empties org-agenda-files"
  (interactive)
  (setq org-agenda-files nil)
  )

(defun cb-refresh-org-agenda ()
  "Fixes broken agenda from new, moved or moved files."
  (interactive)

  (with-eval-after-load 'org
    ;; indent two spaces or toggle script won't work
    ;; Excludes /deferred and /notes to avoid agenda lag.
    (setq org-agenda-files nil)
    (load-org-agenda-files-recursively "~/1-mansort/1-Textmind/1-Human/1-persInter/" )
    (load-org-agenda-files-recursively "~/1-mansort/1-Textmind/1-Human/2-Time/" )
    (load-org-agenda-files-recursively "~/1-mansort/1-Textmind/1-Human/3-People/" )
    (load-org-agenda-files-recursively "~/1-mansort/1-Textmind/1-Human/4-Object/" )
    (load-org-agenda-files-recursively "~/1-mansort/1-Textmind/1-Human/5-Location/" )
    (load-org-agenda-files-recursively "~/1-mansort/1-Textmind/1-Human/6-Action/" )
    (load-org-agenda-files-recursively "~/1-mansort/1-Textmind/1-Human/8-Scratch/" )
    )

)

(cb-refresh-org-agenda)

;; ** for text searches

;; ensures that e.g. links to files in /notes can be found without resorting to grep
(setq org-agenda-text-search-extra-files
      (directory-files-recursively "~/1-mansort/1-Textmind/1-Human/7-Notes/" ".org")
      )

;; * footer

(provide 'maintext-toggle)
